<!DOCTYPE html>
<html>
  <head>
    <title>AR.js QRCode Marker</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ar.js/aframe/build/aframe-ar.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsqr/dist/jsQR.js"></script>
  </head>
  <body style="margin: 0; overflow: hidden;">
    <a-scene embedded arjs>
      <a-marker preset="hiro"></a-marker>
      <a-box position="0 0.5 0" material="color: blue;"></a-box>
      <a-entity camera qr-scanner></a-entity>
    </a-scene>

    <script>
      // Componente A-Frame para detectar e decodificar o QR Code
      AFRAME.registerComponent('qr-scanner', {
        init: function () {
          this.video = document.querySelector('video');
          this.canvas = document.createElement('canvas');
          this.canvasContext = this.canvas.getContext('2d');
          this.decoded = false;
        },
        tick: function () {
          if (this.video.readyState === this.video.HAVE_ENOUGH_DATA && !this.decoded) {
            this.canvas.width = this.video.videoWidth;
            this.canvas.height = this.video.videoHeight;
            this.canvasContext.drawImage(this.video, 0, 0, this.canvas.width, this.canvas.height);
            var imageData = this.canvasContext.getImageData(0, 0, this.canvas.width, this.canvas.height);
            var code = jsQR(imageData.data, imageData.width, imageData.height);
            if (code) {
              showQRCodeContent(code.data);
              this.decoded = true;
            }
          }
        }
      });

      // Função para exibir o alerta com o conteúdo do QR Code
      function showQRCodeContent(content) {
        alert('Conteúdo do QR Code: ' + content);
      }
    </script>
  </body>
</html>